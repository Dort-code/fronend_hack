{"ast":null,"code":"import React,{useEffect,useRef,useState}from\"react\";import{FaBell,FaSignOutAlt}from\"react-icons/fa\";import logo from\"./TNS_Energo_logo.png\";import'./HederUserPA.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export function HederUserPA(_ref){let{onLogout}=_ref;const[notificationsList,setNotificationsList]=useState([{id:1,text:\"Новое сообщение\",read:false},{id:2,text:\"Обновление системы\",read:false}]);const unreadCount=notificationsList.filter(n=>!n.read).length;const[showNotifications,setShowNotifications]=useState(false);const notificationsRef=useRef(null);const toggleNotifications=()=>{const newShowState=!showNotifications;setShowNotifications(newShowState);if(newShowState&&unreadCount>0){setNotificationsList(notificationsList.map(n=>({...n,read:true})));}};useEffect(()=>{const handleClickOutside=event=>{if(notificationsRef.current&&!notificationsRef.current.contains(event.target)){if(!event.target.closest('.notification-btn')){setShowNotifications(false);}}};if(showNotifications){document.addEventListener('mousedown',handleClickOutside);}else{document.removeEventListener('mousedown',handleClickOutside);}return()=>{document.removeEventListener('mousedown',handleClickOutside);};},[showNotifications]);return/*#__PURE__*/_jsxs(\"header\",{className:\"header\",children:[/*#__PURE__*/_jsxs(\"button\",{className:\"notification-btn\",onClick:toggleNotifications,\"aria-label\":\"\\u0423\\u0432\\u0435\\u0434\\u043E\\u043C\\u043B\\u0435\\u043D\\u0438\\u044F\",\"aria-expanded\":showNotifications,children:[/*#__PURE__*/_jsx(FaBell,{size:20}),unreadCount>0&&/*#__PURE__*/_jsx(\"span\",{className:\"notification-badge\",children:unreadCount})]}),/*#__PURE__*/_jsx(\"div\",{className:\"logo-container\",children:/*#__PURE__*/_jsx(\"img\",{src:logo,alt:\"\\u041B\\u043E\\u0433\\u043E\\u0442\\u0438\\u043F \\u0422\\u041D\\u0421 \\u042D\\u043D\\u0435\\u0440\\u0433\\u043E\",className:\"logo\"})}),/*#__PURE__*/_jsx(\"button\",{className:\"logout-btn\",onClick:onLogout,\"aria-label\":\"\\u0412\\u044B\\u0445\\u043E\\u0434\",children:/*#__PURE__*/_jsx(FaSignOutAlt,{size:20})}),showNotifications&&/*#__PURE__*/_jsx(\"div\",{className:\"notification-dropdown\",ref:notificationsRef,children:notificationsList.length>0?/*#__PURE__*/_jsx(\"ul\",{children:notificationsList.map(notification=>/*#__PURE__*/_jsx(\"li\",{className:notification.read?'read':'unread',children:notification.text},notification.id))}):/*#__PURE__*/_jsx(\"p\",{children:\"\\u041D\\u043E\\u0432\\u044B\\u0445 \\u0443\\u0432\\u0435\\u0434\\u043E\\u043C\\u043B\\u0435\\u043D\\u0438\\u0439 \\u043D\\u0435\\u0442\"})})]});}","map":{"version":3,"names":["React","useEffect","useRef","useState","FaBell","FaSignOutAlt","logo","jsx","_jsx","jsxs","_jsxs","HederUserPA","_ref","onLogout","notificationsList","setNotificationsList","id","text","read","unreadCount","filter","n","length","showNotifications","setShowNotifications","notificationsRef","toggleNotifications","newShowState","map","handleClickOutside","event","current","contains","target","closest","document","addEventListener","removeEventListener","className","children","onClick","size","src","alt","ref","notification"],"sources":["C:/Users/Dell/WebstormProjects/fronend_hack/src/Page/HederUserPA.js"],"sourcesContent":["import React, {useEffect, useRef, useState} from \"react\";\r\nimport {FaBell, FaSignOutAlt} from \"react-icons/fa\";\r\nimport logo from \"./TNS_Energo_logo.png\";\r\nimport './HederUserPA.css';\r\n\r\nexport function HederUserPA({ onLogout }){\r\n    const [notificationsList, setNotificationsList] = useState([\r\n        { id: 1, text: \"Новое сообщение\", read: false },\r\n        { id: 2, text: \"Обновление системы\", read: false }\r\n    ]);\r\n\r\n    const unreadCount = notificationsList.filter(n => !n.read).length;\r\n    const [showNotifications, setShowNotifications] = useState(false);\r\n    const notificationsRef = useRef(null);\r\n\r\n\r\n\r\n    const toggleNotifications = () => {\r\n        const newShowState = !showNotifications;\r\n        setShowNotifications(newShowState);\r\n\r\n        if (newShowState && unreadCount > 0) {\r\n            setNotificationsList(notificationsList.map(n => ({ ...n, read: true })));\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        const handleClickOutside = (event) => {\r\n            if (notificationsRef.current && !notificationsRef.current.contains(event.target)) {\r\n                if (!event.target.closest('.notification-btn')) {\r\n                    setShowNotifications(false);\r\n                }\r\n            }\r\n        };\r\n\r\n        if (showNotifications) {\r\n            document.addEventListener('mousedown', handleClickOutside);\r\n        } else {\r\n            document.removeEventListener('mousedown', handleClickOutside);\r\n        }\r\n\r\n        return () => {\r\n            document.removeEventListener('mousedown', handleClickOutside);\r\n        };\r\n    }, [showNotifications]);\r\n\r\n    return (\r\n        <header className=\"header\">\r\n            <button\r\n                className=\"notification-btn\"\r\n                onClick={toggleNotifications}\r\n                aria-label=\"Уведомления\"\r\n                aria-expanded={showNotifications}\r\n            >\r\n                <FaBell size={20} />\r\n                {unreadCount > 0 && (\r\n                    <span className=\"notification-badge\">{unreadCount}</span>\r\n                )}\r\n            </button>\r\n\r\n            <div className=\"logo-container\">\r\n                <img src={logo} alt=\"Логотип ТНС Энерго\" className=\"logo\" />\r\n            </div>\r\n\r\n            <button\r\n                className=\"logout-btn\"\r\n                onClick={onLogout}\r\n                aria-label=\"Выход\"\r\n            >\r\n                <FaSignOutAlt size={20} />\r\n            </button>\r\n\r\n            {showNotifications && (\r\n                <div\r\n                    className=\"notification-dropdown\"\r\n                    ref={notificationsRef}\r\n                >\r\n                    {notificationsList.length > 0 ? (\r\n                        <ul>\r\n                            {notificationsList.map(notification => (\r\n                                <li key={notification.id} className={notification.read ? 'read' : 'unread'}>\r\n                                    {notification.text}\r\n                                </li>\r\n                            ))}\r\n                        </ul>\r\n                    ) : (\r\n                        <p>Новых уведомлений нет</p>\r\n                    )}\r\n                </div>\r\n            )}\r\n        </header>\r\n    );\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}