{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Dell\\\\WebstormProjects\\\\fronend_hack\\\\src\\\\Page\\\\Protocol.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { FaTimes, FaSave, FaFilePdf } from 'react-icons/fa';\nimport './Protocol.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport function Protocol({\n  protocol,\n  onClose\n}) {\n  _s();\n  const API_BASE_URL = 'https://your-api-endpoint.com/api';\n  const [activeForm, setActiveForm] = useState('protocol');\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const [isEditing, setIsEditing] = useState(false);\n\n  // Данные форм\n  const [formData, setFormData] = useState({\n    protocolNumber: '',\n    date: '',\n    participants: [],\n    questions: []\n  });\n  const [resolutionData, setResolutionData] = useState({\n    date: '',\n    decisions: []\n  });\n\n  // Загрузка данных протокола\n  useEffect(() => {\n    if (protocol) {\n      const fetchProtocolData = async () => {\n        setIsLoading(true);\n        try {\n          const response = await fetch(`${API_BASE_URL}/protocols/${protocol.id}`, {\n            headers: {\n              'Authorization': `Bearer ${localStorage.getItem('token')}`\n            }\n          });\n          if (!response.ok) throw new Error('Ошибка загрузки протокола');\n          const data = await response.json();\n          setFormData(data.protocol);\n          setResolutionData(data.resolution);\n        } catch (err) {\n          setError(err.message);\n        } finally {\n          setIsLoading(false);\n        }\n      };\n      fetchProtocolData();\n    } else {\n      // Инициализация пустых форм\n      setFormData({\n        protocolNumber: '',\n        date: new Date().toISOString().split('T')[0],\n        participants: [],\n        questions: [{\n          text: '',\n          description: '',\n          results: ''\n        }]\n      });\n      setResolutionData({\n        date: new Date().toISOString().split('T')[0],\n        decisions: [{\n          question: '',\n          resolution: ''\n        }]\n      });\n    }\n  }, [protocol]);\n\n  // Обработчики для формы протокола\n  const handleProtocolChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setFormData(prev => ({\n      ...prev,\n      [name]: value\n    }));\n  };\n  const handleQuestionChange = (index, e) => {\n    const {\n      name,\n      value\n    } = e.target;\n    const updatedQuestions = [...formData.questions];\n    updatedQuestions[index] = {\n      ...updatedQuestions[index],\n      [name]: value\n    };\n    setFormData(prev => ({\n      ...prev,\n      questions: updatedQuestions\n    }));\n  };\n  const addQuestion = () => {\n    setFormData(prev => ({\n      ...prev,\n      questions: [...prev.questions, {\n        text: '',\n        description: '',\n        results: ''\n      }]\n    }));\n  };\n  const removeQuestion = index => {\n    const updatedQuestions = [...formData.questions];\n    updatedQuestions.splice(index, 1);\n    setFormData(prev => ({\n      ...prev,\n      questions: updatedQuestions\n    }));\n  };\n\n  // Обработчики для формы решения\n  const handleResolutionChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setResolutionData(prev => ({\n      ...prev,\n      [name]: value\n    }));\n  };\n  const handleDecisionChange = (index, e) => {\n    const {\n      name,\n      value\n    } = e.target;\n    const updatedDecisions = [...resolutionData.decisions];\n    updatedDecisions[index] = {\n      ...updatedDecisions[index],\n      [name]: value\n    };\n    setResolutionData(prev => ({\n      ...prev,\n      decisions: updatedDecisions\n    }));\n  };\n  const addDecision = () => {\n    setResolutionData(prev => ({\n      ...prev,\n      decisions: [...prev.decisions, {\n        question: '',\n        resolution: ''\n      }]\n    }));\n  };\n  const removeDecision = index => {\n    const updatedDecisions = [...resolutionData.decisions];\n    updatedDecisions.splice(index, 1);\n    setResolutionData(prev => ({\n      ...prev,\n      decisions: updatedDecisions\n    }));\n  };\n\n  // Сохранение данных\n  const saveProtocol = async () => {\n    setIsLoading(true);\n    try {\n      const response = await fetch(`${API_BASE_URL}/protocols`, {\n        method: protocol ? 'PUT' : 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${localStorage.getItem('token')}`\n        },\n        body: JSON.stringify({\n          protocol: formData,\n          resolution: resolutionData\n        })\n      });\n      if (!response.ok) throw new Error('Ошибка сохранения протокола');\n      onClose();\n    } catch (err) {\n      setError(err.message);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  // Генерация PDF\n  const generatePDF = async () => {\n    setIsLoading(true);\n    try {\n      const response = await fetch(`${API_BASE_URL}/protocols/generate-pdf`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${localStorage.getItem('token')}`\n        },\n        body: JSON.stringify({\n          protocol: formData,\n          resolution: resolutionData\n        })\n      });\n      if (!response.ok) throw new Error('Ошибка генерации PDF');\n      const blob = await response.blob();\n      const url = window.URL.createObjectURL(blob);\n      const link = document.createElement('a');\n      link.href = url;\n      link.download = `Протокол_${formData.protocolNumber || 'новый'}.pdf`;\n      link.click();\n    } catch (err) {\n      setError(err.message);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"protocol-modal-overlay\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"protocol-modal-content\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"close-modal\",\n        onClick: onClose,\n        disabled: isLoading,\n        children: /*#__PURE__*/_jsxDEV(FaTimes, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 196,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n        children: protocol ? 'Редактирование протокола' : 'Создание нового протокола'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-tabs\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: `tab-button ${activeForm === 'protocol' ? 'active' : ''}`,\n          onClick: () => setActiveForm('protocol'),\n          children: \"\\u041F\\u0440\\u043E\\u0442\\u043E\\u043A\\u043E\\u043B\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 202,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: `tab-button ${activeForm === 'resolution' ? 'active' : ''}`,\n          onClick: () => setActiveForm('resolution'),\n          children: \"\\u041F\\u0440\\u043E\\u0435\\u043A\\u0442 \\u0440\\u0435\\u0448\\u0435\\u043D\\u0438\\u044F\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 208,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 17\n      }, this), isLoading && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"loading-overlay\",\n        children: \"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0430...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 31\n      }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"error-message\",\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 217,\n        columnNumber: 27\n      }, this), activeForm === 'protocol' && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"protocol-form\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"\\u041D\\u043E\\u043C\\u0435\\u0440 \\u043F\\u0440\\u043E\\u0442\\u043E\\u043A\\u043E\\u043B\\u0430:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 222,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            name: \"protocolNumber\",\n            value: formData.protocolNumber,\n            onChange: handleProtocolChange,\n            disabled: !isEditing && protocol\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 223,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 221,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"\\u0414\\u0430\\u0442\\u0430 \\u0441\\u043E\\u0441\\u0442\\u0430\\u0432\\u043B\\u0435\\u043D\\u0438\\u044F:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 233,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"date\",\n            name: \"date\",\n            value: formData.date,\n            onChange: handleProtocolChange,\n            disabled: !isEditing && protocol\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 234,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 232,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"\\u0423\\u0447\\u0430\\u0441\\u0442\\u043D\\u0438\\u043A\\u0438:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 244,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n            name: \"participants\",\n            value: formData.participants.join('\\n'),\n            onChange: e => handleProtocolChange({\n              target: {\n                name: 'participants',\n                value: e.target.value.split('\\n')\n              }\n            }),\n            disabled: !isEditing && protocol\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 245,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 243,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"\\u0412\\u043E\\u043F\\u0440\\u043E\\u0441\\u044B \\u0433\\u043E\\u043B\\u043E\\u0441\\u043E\\u0432\\u0430\\u043D\\u0438\\u044F:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 258,\n          columnNumber: 25\n        }, this), formData.questions.map((question, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"question-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: [\"\\u0412\\u043E\\u043F\\u0440\\u043E\\u0441 \", index + 1, \":\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 262,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              name: \"text\",\n              value: question.text,\n              onChange: e => handleQuestionChange(index, e),\n              disabled: !isEditing && protocol\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 263,\n              columnNumber: 37\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 261,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"\\u041E\\u043F\\u0438\\u0441\\u0430\\u043D\\u0438\\u0435:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 273,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n              name: \"description\",\n              value: question.description,\n              onChange: e => handleQuestionChange(index, e),\n              disabled: !isEditing && protocol\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 274,\n              columnNumber: 37\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 272,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"\\u0420\\u0435\\u0437\\u0443\\u043B\\u044C\\u0442\\u0430\\u0442\\u044B:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 283,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n              name: \"results\",\n              value: question.results,\n              onChange: e => handleQuestionChange(index, e),\n              disabled: !isEditing && protocol\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 284,\n              columnNumber: 37\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 282,\n            columnNumber: 33\n          }, this), (isEditing || !protocol) && formData.questions.length > 1 && /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            className: \"remove-button\",\n            onClick: () => removeQuestion(index),\n            children: \"\\u0423\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C \\u0432\\u043E\\u043F\\u0440\\u043E\\u0441\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 293,\n            columnNumber: 37\n          }, this)]\n        }, index, true, {\n          fileName: _jsxFileName,\n          lineNumber: 260,\n          columnNumber: 29\n        }, this)), (isEditing || !protocol) && /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          className: \"add-button\",\n          onClick: addQuestion,\n          children: \"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C \\u0432\\u043E\\u043F\\u0440\\u043E\\u0441\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 305,\n          columnNumber: 29\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 220,\n        columnNumber: 21\n      }, this), activeForm === 'resolution' && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"resolution-form\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"\\u0414\\u0430\\u0442\\u0430 \\u0440\\u0435\\u0448\\u0435\\u043D\\u0438\\u044F:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 319,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"date\",\n            name: \"date\",\n            value: resolutionData.date,\n            onChange: handleResolutionChange,\n            disabled: !isEditing && protocol\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 320,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 318,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"\\u041F\\u0440\\u0438\\u043D\\u044F\\u0442\\u044B\\u0435 \\u0440\\u0435\\u0448\\u0435\\u043D\\u0438\\u044F:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 329,\n          columnNumber: 25\n        }, this), resolutionData.decisions.map((decision, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"decision-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: [\"\\u0412\\u043E\\u043F\\u0440\\u043E\\u0441 \", index + 1, \":\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 333,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              name: \"question\",\n              value: decision.question,\n              onChange: e => handleDecisionChange(index, e),\n              disabled: !isEditing && protocol\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 334,\n              columnNumber: 37\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 332,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"\\u0420\\u0435\\u0448\\u0435\\u043D\\u0438\\u0435:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 344,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n              name: \"resolution\",\n              value: decision.resolution,\n              onChange: e => handleDecisionChange(index, e),\n              disabled: !isEditing && protocol\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 345,\n              columnNumber: 37\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 343,\n            columnNumber: 33\n          }, this), (isEditing || !protocol) && resolutionData.decisions.length > 1 && /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            className: \"remove-button\",\n            onClick: () => removeDecision(index),\n            children: \"\\u0423\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C \\u0440\\u0435\\u0448\\u0435\\u043D\\u0438\\u0435\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 354,\n            columnNumber: 37\n          }, this)]\n        }, index, true, {\n          fileName: _jsxFileName,\n          lineNumber: 331,\n          columnNumber: 29\n        }, this)), (isEditing || !protocol) && /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          className: \"add-button\",\n          onClick: addDecision,\n          children: \"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C \\u0440\\u0435\\u0448\\u0435\\u043D\\u0438\\u0435\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 366,\n          columnNumber: 29\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 317,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-actions\",\n        children: [protocol && /*#__PURE__*/_jsxDEV(\"button\", {\n          className: `toggle-edit-button ${isEditing ? 'cancel' : 'edit'}`,\n          onClick: () => setIsEditing(!isEditing),\n          disabled: isLoading,\n          children: isEditing ? 'Отменить редактирование' : 'Редактировать'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 379,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"generate-pdf-button\",\n          onClick: generatePDF,\n          disabled: isLoading,\n          children: [/*#__PURE__*/_jsxDEV(FaFilePdf, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 393,\n            columnNumber: 25\n          }, this), \" \\u0421\\u043E\\u0437\\u0434\\u0430\\u0442\\u044C PDF\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 388,\n          columnNumber: 21\n        }, this), (isEditing || !protocol) && /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"save-button\",\n          onClick: saveProtocol,\n          disabled: isLoading,\n          children: [/*#__PURE__*/_jsxDEV(FaSave, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 402,\n            columnNumber: 29\n          }, this), \" \\u0421\\u043E\\u0445\\u0440\\u0430\\u043D\\u0438\\u0442\\u044C\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 397,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 377,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 189,\n    columnNumber: 9\n  }, this);\n}\n_s(Protocol, \"NXml8Q+BXzCmY0ocfRCry7/4OiU=\");\n_c = Protocol;\nvar _c;\n$RefreshReg$(_c, \"Protocol\");","map":{"version":3,"names":["React","useState","useEffect","FaTimes","FaSave","FaFilePdf","jsxDEV","_jsxDEV","Protocol","protocol","onClose","_s","API_BASE_URL","activeForm","setActiveForm","isLoading","setIsLoading","error","setError","isEditing","setIsEditing","formData","setFormData","protocolNumber","date","participants","questions","resolutionData","setResolutionData","decisions","fetchProtocolData","response","fetch","id","headers","localStorage","getItem","ok","Error","data","json","resolution","err","message","Date","toISOString","split","text","description","results","question","handleProtocolChange","e","name","value","target","prev","handleQuestionChange","index","updatedQuestions","addQuestion","removeQuestion","splice","handleResolutionChange","handleDecisionChange","updatedDecisions","addDecision","removeDecision","saveProtocol","method","body","JSON","stringify","generatePDF","blob","url","window","URL","createObjectURL","link","document","createElement","href","download","click","className","children","onClick","disabled","fileName","_jsxFileName","lineNumber","columnNumber","type","onChange","join","map","length","decision","_c","$RefreshReg$"],"sources":["C:/Users/Dell/WebstormProjects/fronend_hack/src/Page/Protocol.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { FaTimes, FaSave, FaFilePdf } from 'react-icons/fa';\r\nimport './Protocol.css';\r\n\r\nexport function Protocol({ protocol, onClose }) {\r\n    const API_BASE_URL = 'https://your-api-endpoint.com/api';\r\n    const [activeForm, setActiveForm] = useState('protocol');\r\n    const [isLoading, setIsLoading] = useState(false);\r\n    const [error, setError] = useState(null);\r\n    const [isEditing, setIsEditing] = useState(false);\r\n\r\n    // Данные форм\r\n    const [formData, setFormData] = useState({\r\n        protocolNumber: '',\r\n        date: '',\r\n        participants: [],\r\n        questions: []\r\n    });\r\n\r\n    const [resolutionData, setResolutionData] = useState({\r\n        date: '',\r\n        decisions: []\r\n    });\r\n\r\n    // Загрузка данных протокола\r\n    useEffect(() => {\r\n        if (protocol) {\r\n            const fetchProtocolData = async () => {\r\n                setIsLoading(true);\r\n                try {\r\n                    const response = await fetch(`${API_BASE_URL}/protocols/${protocol.id}`, {\r\n                        headers: {\r\n                            'Authorization': `Bearer ${localStorage.getItem('token')}`\r\n                        }\r\n                    });\r\n\r\n                    if (!response.ok) throw new Error('Ошибка загрузки протокола');\r\n\r\n                    const data = await response.json();\r\n                    setFormData(data.protocol);\r\n                    setResolutionData(data.resolution);\r\n                } catch (err) {\r\n                    setError(err.message);\r\n                } finally {\r\n                    setIsLoading(false);\r\n                }\r\n            };\r\n\r\n            fetchProtocolData();\r\n        } else {\r\n            // Инициализация пустых форм\r\n            setFormData({\r\n                protocolNumber: '',\r\n                date: new Date().toISOString().split('T')[0],\r\n                participants: [],\r\n                questions: [{\r\n                    text: '',\r\n                    description: '',\r\n                    results: ''\r\n                }]\r\n            });\r\n\r\n            setResolutionData({\r\n                date: new Date().toISOString().split('T')[0],\r\n                decisions: [{\r\n                    question: '',\r\n                    resolution: ''\r\n                }]\r\n            });\r\n        }\r\n    }, [protocol]);\r\n\r\n    // Обработчики для формы протокола\r\n    const handleProtocolChange = (e) => {\r\n        const { name, value } = e.target;\r\n        setFormData(prev => ({ ...prev, [name]: value }));\r\n    };\r\n\r\n    const handleQuestionChange = (index, e) => {\r\n        const { name, value } = e.target;\r\n        const updatedQuestions = [...formData.questions];\r\n        updatedQuestions[index] = { ...updatedQuestions[index], [name]: value };\r\n        setFormData(prev => ({ ...prev, questions: updatedQuestions }));\r\n    };\r\n\r\n    const addQuestion = () => {\r\n        setFormData(prev => ({\r\n            ...prev,\r\n            questions: [\r\n                ...prev.questions,\r\n                { text: '', description: '', results: '' }\r\n            ]\r\n        }));\r\n    };\r\n\r\n    const removeQuestion = (index) => {\r\n        const updatedQuestions = [...formData.questions];\r\n        updatedQuestions.splice(index, 1);\r\n        setFormData(prev => ({ ...prev, questions: updatedQuestions }));\r\n    };\r\n\r\n    // Обработчики для формы решения\r\n    const handleResolutionChange = (e) => {\r\n        const { name, value } = e.target;\r\n        setResolutionData(prev => ({ ...prev, [name]: value }));\r\n    };\r\n\r\n    const handleDecisionChange = (index, e) => {\r\n        const { name, value } = e.target;\r\n        const updatedDecisions = [...resolutionData.decisions];\r\n        updatedDecisions[index] = { ...updatedDecisions[index], [name]: value };\r\n        setResolutionData(prev => ({ ...prev, decisions: updatedDecisions }));\r\n    };\r\n\r\n    const addDecision = () => {\r\n        setResolutionData(prev => ({\r\n            ...prev,\r\n            decisions: [\r\n                ...prev.decisions,\r\n                { question: '', resolution: '' }\r\n            ]\r\n        }));\r\n    };\r\n\r\n    const removeDecision = (index) => {\r\n        const updatedDecisions = [...resolutionData.decisions];\r\n        updatedDecisions.splice(index, 1);\r\n        setResolutionData(prev => ({ ...prev, decisions: updatedDecisions }));\r\n    };\r\n\r\n    // Сохранение данных\r\n    const saveProtocol = async () => {\r\n        setIsLoading(true);\r\n        try {\r\n            const response = await fetch(`${API_BASE_URL}/protocols`, {\r\n                method: protocol ? 'PUT' : 'POST',\r\n                headers: {\r\n                    'Content-Type': 'application/json',\r\n                    'Authorization': `Bearer ${localStorage.getItem('token')}`\r\n                },\r\n                body: JSON.stringify({\r\n                    protocol: formData,\r\n                    resolution: resolutionData\r\n                })\r\n            });\r\n\r\n            if (!response.ok) throw new Error('Ошибка сохранения протокола');\r\n\r\n            onClose();\r\n        } catch (err) {\r\n            setError(err.message);\r\n        } finally {\r\n            setIsLoading(false);\r\n        }\r\n    };\r\n\r\n    // Генерация PDF\r\n    const generatePDF = async () => {\r\n        setIsLoading(true);\r\n        try {\r\n            const response = await fetch(`${API_BASE_URL}/protocols/generate-pdf`, {\r\n                method: 'POST',\r\n                headers: {\r\n                    'Content-Type': 'application/json',\r\n                    'Authorization': `Bearer ${localStorage.getItem('token')}`\r\n                },\r\n                body: JSON.stringify({\r\n                    protocol: formData,\r\n                    resolution: resolutionData\r\n                })\r\n            });\r\n\r\n            if (!response.ok) throw new Error('Ошибка генерации PDF');\r\n\r\n            const blob = await response.blob();\r\n            const url = window.URL.createObjectURL(blob);\r\n            const link = document.createElement('a');\r\n            link.href = url;\r\n            link.download = `Протокол_${formData.protocolNumber || 'новый'}.pdf`;\r\n            link.click();\r\n        } catch (err) {\r\n            setError(err.message);\r\n        } finally {\r\n            setIsLoading(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"protocol-modal-overlay\">\r\n            <div className=\"protocol-modal-content\">\r\n                <button\r\n                    className=\"close-modal\"\r\n                    onClick={onClose}\r\n                    disabled={isLoading}\r\n                >\r\n                    <FaTimes />\r\n                </button>\r\n\r\n                <h2>{protocol ? 'Редактирование протокола' : 'Создание нового протокола'}</h2>\r\n\r\n                <div className=\"form-tabs\">\r\n                    <button\r\n                        className={`tab-button ${activeForm === 'protocol' ? 'active' : ''}`}\r\n                        onClick={() => setActiveForm('protocol')}\r\n                    >\r\n                        Протокол\r\n                    </button>\r\n                    <button\r\n                        className={`tab-button ${activeForm === 'resolution' ? 'active' : ''}`}\r\n                        onClick={() => setActiveForm('resolution')}\r\n                    >\r\n                        Проект решения\r\n                    </button>\r\n                </div>\r\n\r\n                {isLoading && <div className=\"loading-overlay\">Загрузка...</div>}\r\n                {error && <div className=\"error-message\">{error}</div>}\r\n\r\n                {activeForm === 'protocol' && (\r\n                    <div className=\"protocol-form\">\r\n                        <div className=\"form-group\">\r\n                            <label>Номер протокола:</label>\r\n                            <input\r\n                                type=\"text\"\r\n                                name=\"protocolNumber\"\r\n                                value={formData.protocolNumber}\r\n                                onChange={handleProtocolChange}\r\n                                disabled={!isEditing && protocol}\r\n                            />\r\n                        </div>\r\n\r\n                        <div className=\"form-group\">\r\n                            <label>Дата составления:</label>\r\n                            <input\r\n                                type=\"date\"\r\n                                name=\"date\"\r\n                                value={formData.date}\r\n                                onChange={handleProtocolChange}\r\n                                disabled={!isEditing && protocol}\r\n                            />\r\n                        </div>\r\n\r\n                        <div className=\"form-group\">\r\n                            <label>Участники:</label>\r\n                            <textarea\r\n                                name=\"participants\"\r\n                                value={formData.participants.join('\\n')}\r\n                                onChange={(e) => handleProtocolChange({\r\n                                    target: {\r\n                                        name: 'participants',\r\n                                        value: e.target.value.split('\\n')\r\n                                    }\r\n                                })}\r\n                                disabled={!isEditing && protocol}\r\n                            />\r\n                        </div>\r\n\r\n                        <h3>Вопросы голосования:</h3>\r\n                        {formData.questions.map((question, index) => (\r\n                            <div key={index} className=\"question-group\">\r\n                                <div className=\"form-group\">\r\n                                    <label>Вопрос {index + 1}:</label>\r\n                                    <input\r\n                                        type=\"text\"\r\n                                        name=\"text\"\r\n                                        value={question.text}\r\n                                        onChange={(e) => handleQuestionChange(index, e)}\r\n                                        disabled={!isEditing && protocol}\r\n                                    />\r\n                                </div>\r\n\r\n                                <div className=\"form-group\">\r\n                                    <label>Описание:</label>\r\n                                    <textarea\r\n                                        name=\"description\"\r\n                                        value={question.description}\r\n                                        onChange={(e) => handleQuestionChange(index, e)}\r\n                                        disabled={!isEditing && protocol}\r\n                                    />\r\n                                </div>\r\n\r\n                                <div className=\"form-group\">\r\n                                    <label>Результаты:</label>\r\n                                    <textarea\r\n                                        name=\"results\"\r\n                                        value={question.results}\r\n                                        onChange={(e) => handleQuestionChange(index, e)}\r\n                                        disabled={!isEditing && protocol}\r\n                                    />\r\n                                </div>\r\n\r\n                                {(isEditing || !protocol) && formData.questions.length > 1 && (\r\n                                    <button\r\n                                        type=\"button\"\r\n                                        className=\"remove-button\"\r\n                                        onClick={() => removeQuestion(index)}\r\n                                    >\r\n                                        Удалить вопрос\r\n                                    </button>\r\n                                )}\r\n                            </div>\r\n                        ))}\r\n\r\n                        {(isEditing || !protocol) && (\r\n                            <button\r\n                                type=\"button\"\r\n                                className=\"add-button\"\r\n                                onClick={addQuestion}\r\n                            >\r\n                                Добавить вопрос\r\n                            </button>\r\n                        )}\r\n                    </div>\r\n                )}\r\n\r\n                {activeForm === 'resolution' && (\r\n                    <div className=\"resolution-form\">\r\n                        <div className=\"form-group\">\r\n                            <label>Дата решения:</label>\r\n                            <input\r\n                                type=\"date\"\r\n                                name=\"date\"\r\n                                value={resolutionData.date}\r\n                                onChange={handleResolutionChange}\r\n                                disabled={!isEditing && protocol}\r\n                            />\r\n                        </div>\r\n\r\n                        <h3>Принятые решения:</h3>\r\n                        {resolutionData.decisions.map((decision, index) => (\r\n                            <div key={index} className=\"decision-group\">\r\n                                <div className=\"form-group\">\r\n                                    <label>Вопрос {index + 1}:</label>\r\n                                    <input\r\n                                        type=\"text\"\r\n                                        name=\"question\"\r\n                                        value={decision.question}\r\n                                        onChange={(e) => handleDecisionChange(index, e)}\r\n                                        disabled={!isEditing && protocol}\r\n                                    />\r\n                                </div>\r\n\r\n                                <div className=\"form-group\">\r\n                                    <label>Решение:</label>\r\n                                    <textarea\r\n                                        name=\"resolution\"\r\n                                        value={decision.resolution}\r\n                                        onChange={(e) => handleDecisionChange(index, e)}\r\n                                        disabled={!isEditing && protocol}\r\n                                    />\r\n                                </div>\r\n\r\n                                {(isEditing || !protocol) && resolutionData.decisions.length > 1 && (\r\n                                    <button\r\n                                        type=\"button\"\r\n                                        className=\"remove-button\"\r\n                                        onClick={() => removeDecision(index)}\r\n                                    >\r\n                                        Удалить решение\r\n                                    </button>\r\n                                )}\r\n                            </div>\r\n                        ))}\r\n\r\n                        {(isEditing || !protocol) && (\r\n                            <button\r\n                                type=\"button\"\r\n                                className=\"add-button\"\r\n                                onClick={addDecision}\r\n                            >\r\n                                Добавить решение\r\n                            </button>\r\n                        )}\r\n                    </div>\r\n                )}\r\n\r\n                <div className=\"form-actions\">\r\n                    {protocol && (\r\n                        <button\r\n                            className={`toggle-edit-button ${isEditing ? 'cancel' : 'edit'}`}\r\n                            onClick={() => setIsEditing(!isEditing)}\r\n                            disabled={isLoading}\r\n                        >\r\n                            {isEditing ? 'Отменить редактирование' : 'Редактировать'}\r\n                        </button>\r\n                    )}\r\n\r\n                    <button\r\n                        className=\"generate-pdf-button\"\r\n                        onClick={generatePDF}\r\n                        disabled={isLoading}\r\n                    >\r\n                        <FaFilePdf /> Создать PDF\r\n                    </button>\r\n\r\n                    {(isEditing || !protocol) && (\r\n                        <button\r\n                            className=\"save-button\"\r\n                            onClick={saveProtocol}\r\n                            disabled={isLoading}\r\n                        >\r\n                            <FaSave /> Сохранить\r\n                        </button>\r\n                    )}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}